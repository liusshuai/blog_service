(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd860194"],{"063c":function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return l});var a=n("4020"),s="blogComment";function i(t){return Object(a["a"])("".concat(s,"/getByArticle"),t).then(function(t){return Promise.resolve(t)})}function r(t){return Object(a["a"])("".concat(s,"/getByTweet"),t).then(function(t){return Promise.resolve(t)})}function o(t){return Object(a["a"])("".concat(s,"/getByBoard"),t).then(function(t){return Promise.resolve(t)})}function c(t){return Object(a["a"])("".concat(s,"/getByMovie"),t).then(function(t){return Promise.resolve(t)})}function l(t){return Object(a["b"])("".concat(s,"/addComment"),t).then(function(t){return Promise.resolve(t)})}},"0aae":function(t,e,n){},"0be6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"template_box_wrap",attrs:{id:"commentBox"}},[n("h3",[t._v(t._s(t.title)),n("span",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}]},[t._v("("+t._s(t.total)+")")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.placeholder,expression:"placeholder"}],staticClass:"cancle_reply",on:{click:t.cancel}},[t._v("取消回复")]),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"content",attrs:{placeholder:t.placeholder},domProps:{value:t.content},on:{focus:t.focus,input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("transition",{attrs:{name:"btn-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showForm,expression:"showForm"}],ref:"form",staticClass:"data_form"},[n("div",{staticClass:"info_input"},[n("h3",[t._v("昵称"),n("i",{staticStyle:{color:"red"}},[t._v("*")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{placeholder:"您的昵称（必填）"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"info_input"},[n("h3",[t._v("邮箱"),n("i",{staticStyle:{color:"red"}},[t._v("*")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.useremail,expression:"useremail"}],attrs:{placeholder:"您的邮箱（必填，不公开）"},domProps:{value:t.useremail},on:{input:function(e){e.target.composing||(t.useremail=e.target.value)}}})]),n("div",{staticClass:"info_input"},[n("h3",[t._v("个人站点")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userblog,expression:"userblog"}],attrs:{placeholder:"http:// 有就填，勿填广告链接"},domProps:{value:t.userblog},on:{input:function(e){e.target.composing||(t.userblog=e.target.value)}}})]),n("div",{staticClass:"remmember"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isR,expression:"isR"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isR)?t._i(t.isR,null)>-1:t.isR},on:{change:function(e){var n=t.isR,a=e.target,s=!!a.checked;if(Array.isArray(n)){var i=null,r=t._i(n,i);a.checked?r<0&&(t.isR=n.concat([i])):r>-1&&(t.isR=n.slice(0,r).concat(n.slice(r+1)))}else t.isR=s}}}),t._v(" 记住信息")])])]),n("error-mess",{attrs:{text:t.errorText}}),n("div",{staticClass:"send_btn"},[n("button",{attrs:{type:"button"},on:{click:t.comment}},[t._v("评论")]),t._v(" 💋\n    ")])],1)},s=[],i=(n("a481"),n("c5f6"),n("ba3b")),r=n("0e0b"),o={data:function(){return{showForm:!1,isR:!1,content:"",username:"",useremail:"",userblog:"",errorText:""}},props:{total:{type:Number,default:0},title:{type:String,default:"评论"},placeholder:{type:String,default:""}},mounted:function(){this.getInfoFromStorage()},methods:{getInfoFromStorage:function(){var t=localStorage.getItem("userInfo");if(t)for(var e in this.isR=!0,t=JSON.parse(t),t)this[e]=t[e]},comment:function(){if(this.showForm)if(this.content)if(this.username)if(this.useremail)if(Object(r["a"])(this.useremail)){var t={content:this.content,username:this.username,useremail:this.useremail};this.userblog&&(t.userblog="http://"+this.userblog.replace("http://","")),this.$emit("comment",t),this.content="",this.rememberInfo()}else this.errorText="邮箱格式不正确";else this.errorText="请输入邮箱";else this.errorText="请输入昵称";else this.errorText="内容不能为空",this.$refs.content.focus();else this.showForm=!0},rememberInfo:function(){if(this.isR){var t={username:this.username,useremail:this.useremail,userblog:this.userblog};localStorage.setItem("userInfo",JSON.stringify(t))}else localStorage.removeItem("userInfo")},cancel:function(){this.$emit("cancel")},focus:function(){this.$refs.content.style.height="200px"},toggleForm:function(){this.showForm=!this.showForm}},components:{ErrorMess:i["a"]}},c=o,l=(n("fcdb"),n("2877")),u=Object(l["a"])(c,a,s,!1,null,"712abcd1",null);e["a"]=u.exports},1695:function(t,e,n){},2423:function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"f",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return m}),n.d(e,"g",function(){return d});var a=n("4020"),s=n("1503"),i="article";function r(t){return Object(a["a"])("".concat(i,"/getByAuthor"),{author:s["a"],page:t.page||1,limit:t.limit||5,show:1}).then(function(t){return Promise.resolve(t)})}function o(t){return Object(a["a"])("".concat(i,"/getOneById"),{id:t}).then(function(t){return Promise.resolve(t)})}function c(t){return Object(a["a"])("".concat(i,"/getAdjacent"),{id:t,author:s["a"]}).then(function(t){return Promise.resolve(t)})}function l(t){return Object(a["a"])("".concat(i,"/getArchiveArticleByChannel"),{cid:t,author:s["a"]}).then(function(t){return Promise.resolve(t)})}function u(t){return Object(a["a"])("".concat(i,"/getArchiveArticleByTag"),{tag:t,author:s["a"]}).then(function(t){return Promise.resolve(t)})}function m(t){return Object(a["a"])("".concat(i,"/getByKeyword"),{keyword:t,limit:100,show:1}).then(function(t){return Promise.resolve(t)})}function d(t){return Object(a["a"])("".concat(i,"/like"),{id:t}).then(function(t){return Promise.resolve(t)})}},"29fd":function(t,e,n){"use strict";var a=n("0aae"),s=n.n(a);s.a},"2ad8":function(t,e,n){},3144:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mess_list_wrap"},[n("ul",{staticClass:"board_list"},t._l(t.data,function(e,a){return n("li",{key:e.id},[n("div",{staticClass:"author_info"},[n("div",{staticClass:"pub_info"},[e.userblog?n("a",{staticClass:"author_name",attrs:{href:e.userblog,target:"_blank"}},[t._v(t._s(e.username))]):n("span",{staticClass:"author_name"},[t._v(t._s(e.username))]),n("span",{staticClass:"pub_time"},[t._v(t._s(e.pubtime))])]),n("div",{staticClass:"base_info"},[n("span",{staticClass:"quto_btn",on:{click:function(n){return t.qutoComment(e)}}},[n("a",{attrs:{href:"#commentBox"}},[t._v("引用")])]),n("span",{staticClass:"floor_text"},[t._v(t._s(t.total-a)+"楼")])])]),n("div",{staticClass:"content"},[n("blockquote",{directives:[{name:"show",rawName:"v-show",value:e.replycontent,expression:"item.replycontent"}]},[n("pre",[t._v("引用 "+t._s(e.replyname)+" 的发言")]),t._v("\n                    "+t._s(e.replycontent)+"\n                ")]),n("p",{staticClass:"content_origin"},[t._v(t._s(e.content))])])])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:t.total>t.data.length,expression:"total > data.length"}],staticClass:"get_more_btn"},[n("more-btn",{attrs:{text:"查看更多"},on:{onClick:this.handleGetMore}})],1)])},s=[],i=(n("c5f6"),n("af11")),r={props:{data:{type:Array,default:function(){return[]}},total:{type:Number,default:0}},methods:{qutoComment:function(t){var e={replyname:t.username,replycontent:t.content,replyemail:t.useremail};this.$emit("quto",e)},handleGetMore:function(){this.$emit("getMore")}},components:{MoreBtn:i["a"]}},o=r,c=(n("ee5b"),n("2877")),l=Object(c["a"])(o,a,s,!1,null,"50140ca9",null);e["a"]=l.exports},"6eb6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"markdown_html_wrap",attrs:{id:"markdown_content"},domProps:{innerHTML:t._s(t.content)}})},s=[],i={props:{content:{type:String,default:""}}},r=i,o=(n("7105"),n("2877")),c=Object(o["a"])(r,a,s,!1,null,null,null);e["a"]=c.exports},7105:function(t,e,n){"use strict";var a=n("a1d3"),s=n.n(a);s.a},"87b1":function(t,e,n){"use strict";var a=n("df2d"),s=n.n(a);s.a},a1d3:function(t,e,n){},af11:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"l_button_wrap",on:{click:t.click}},[t._v(t._s(t.text))])},s=[],i={props:{text:{type:String,default:"click me"}},methods:{click:function(){this.$emit("onClick")}}},r=i,o=(n("ca57"),n("2877")),c=Object(o["a"])(r,a,s,!1,null,"f8e2fae6",null);e["a"]=c.exports},c954:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info_box_wrap"},[n("div",{staticClass:"avatar"}),n("h3",{staticClass:"name"},[t._v(t._s(t.userInfo.nickname))]),t._m(0),n("follow-btn",{on:{followCallback:t.followCallback}}),n("div",{staticClass:"data_info"},[n("span",[t._v("文章："),n("em",[t._v(t._s(t.userInfo.articlecount))])]),n("span",[t._v("留言："),n("em",[t._v(t._s(t.userInfo.commentCount))])]),n("span",[t._v("订阅："),n("em",[t._v(t._s(t.userInfo.followers))])])])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"github"},[n("i",{staticClass:"icon-github"}),n("a",{attrs:{href:"https://github.com/liusshuai",target:"_blank"}},[t._v("https://github.com/liusshuai")])])}],i=n("6f89"),r=n("4e3c"),o={mixins:[r["a"]],components:{FollowBtn:i["a"]}},c=o,l=(n("29fd"),n("2877")),u=Object(l["a"])(c,a,s,!1,null,"08666c75",null);e["a"]=u.exports},ca57:function(t,e,n){"use strict";var a=n("f2da"),s=n.n(a);s.a},dbf3:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article_detail_page"},[n("div",{staticClass:"info_box_wrap"},[n("info-box")],1),n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"article_detail_wrap"},[n("div",{staticClass:"article_main"},[n("h1",{staticClass:"article_title"},[t._v(t._s(t.data.title||"文章不存在"))]),n("div",{staticClass:"article_detail_base_info"},[n("span",{staticClass:"create_time"},[n("i",{staticClass:"icon-create"}),n("em",[t._v(" "+t._s(t.data.createtime))])]),n("span",[n("i",{staticClass:"icon-update"}),n("em",[t._v(" "+t._s(t.data.pubtime))])]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.data.channel,expression:"data.channel"}],staticClass:"archive",on:{click:function(e){return t.goChannel(t.data.channel.id)}}},[t._v("#"+t._s(t.data.channel?t.data.channel.name:"")+"#")]),n("a",{attrs:{href:"#comment"}},[t._v("跳到评论")])]),n("div",{staticClass:"article_content"},[n("md-to-html",{attrs:{content:t.data.content}})],1),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.tags,expression:"tags"}],staticClass:"tags"},t._l(t.tags,function(e){return n("li",{key:e},[n("span",{staticClass:"dot"}),n("span",[t._v(t._s(e))])])}),0),n("div",{staticClass:"next_article"},[n("a",{directives:[{name:"show",rawName:"v-show",value:t.prev.id,expression:"prev.id"}],staticClass:"prev_article_btn",attrs:{href:"/article/"+t.prev.id}},[n("i",{staticClass:"icon-left"}),n("span",[t._v(t._s(t.prev.title))])]),n("a",{directives:[{name:"show",rawName:"v-show",value:t.next.id,expression:"next.id"}],staticClass:"next_article_btn",attrs:{href:"/article/"+t.next.id}},[n("span",[t._v(t._s(t.next.title))]),n("i",{staticClass:"icon-right"})])])]),n("div",{staticClass:"like_article_box"},[n("div",{staticClass:"like_btn",class:t.isLike?"like_btn_a":"like_btn_c",on:{click:t.likeArticle}},[n("i",{staticClass:"icon-like"})]),n("p",[t._v("喜欢("+t._s(t.data.likes)+")")])]),n("div",{staticClass:"article_comment_box",attrs:{id:"comment"}},[n("mess-list",{attrs:{data:t.comments,total:t.commentTotal},on:{quto:t.replyComment,getMore:t.getMoreComments}}),n("comment-box",{attrs:{total:t.commentTotal,placeholder:t.commentText},on:{comment:t.commentArticle,cancel:t.clearReply}})],1)])])],1)},s=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),r=(n("20d6"),n("0be6")),o=n("3144"),c=n("6eb6"),l=n("c954"),u=n("2423"),m=n("063c");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){Object(i["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var h={data:function(){return{data:{},commentPage:1,comments:[],commentTotal:0,prev:{},next:{},commentText:"",loading:!0,isLike:!1}},computed:{tags:function(){var t=[];return this.data.tags&&(t=JSON.parse(this.data.tags)),t},id:function(){return this.$route.params.id}},mounted:function(){this.getDetail(),this.getComments(),this.getNearArticle(),this.didArticleisLike(),this.reply={}},methods:{getDetail:function(){var t=this;Object(u["d"])(this.id).then(function(e){200===e.code&&(t.data=e.data),t.loading=!1})},getComments:function(){var t=this;Object(m["b"])({aid:this.id,page:this.commentPage}).then(function(e){if(200===e.code){var n=e.data,a=n.list,s=n.total;t.comments=t.comments.concat(a),t.commentTotal=s}})},getMoreComments:function(){this.commentPage+=1,this.getComments()},getNearArticle:function(){var t=this;Object(u["f"])(this.id).then(function(e){if(200===e.code){var n=e.data,a=n.prev,s=n.next;a&&(t.prev=a),s&&(t.next=s)}})},didArticleisLike:function(){var t=this,e=JSON.parse(localStorage.getItem("likeArticleIds")||"[]"),n=e.findIndex(function(e){return e===t.id});this.isLike=n>-1},likeArticle:function(){var t=this;this.isLike||Object(u["g"])(this.id).then(function(e){if(200===e.code){var n=JSON.parse(localStorage.getItem("likeArticleIds")||"[]");n.push(t.id),localStorage.setItem("likeArticleIds",JSON.stringify(n)),t.data.likes+=1,t.isLike=!0}})},commentArticle:function(t){var e=this;t=Object.assign({},t,f({host:this.id,type:1},this.reply)),Object(m["a"])(t).then(function(n){200===n.code&&(e.comments.unshift(t),e.commentTotal+=1,location.href="/article/".concat(e.id,"#comment")),e.clearReply()})},replyComment:function(t){this.reply=t,this.commentText="回复 ".concat(t.replyname," 的留言")},clearReply:function(){this.reply={},this.commentText=""},goChannel:function(t){this.$router.push("/archives?type=channel&channel=".concat(t))}},components:{CommentBox:r["a"],MessList:o["a"],MdToHtml:c["a"],InfoBox:l["a"]}},v=h,p=(n("87b1"),n("2877")),_=Object(p["a"])(v,a,s,!1,null,"4437ffae",null);e["default"]=_.exports},df2d:function(t,e,n){},ee5b:function(t,e,n){"use strict";var a=n("1695"),s=n.n(a);s.a},f2da:function(t,e,n){},fcdb:function(t,e,n){"use strict";var a=n("2ad8"),s=n.n(a);s.a}}]);