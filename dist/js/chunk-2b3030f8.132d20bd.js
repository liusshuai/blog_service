(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b3030f8"],{"063c":function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return l});var s=n("4020"),o="blogComment";function r(t){return Object(s["a"])("".concat(o,"/getByArticle"),t).then(function(t){return Promise.resolve(t)})}function a(t){return Object(s["a"])("".concat(o,"/getByTweet"),t).then(function(t){return Promise.resolve(t)})}function i(t){return Object(s["a"])("".concat(o,"/getByBoard"),t).then(function(t){return Promise.resolve(t)})}function c(t){return Object(s["a"])("".concat(o,"/getByMovie"),t).then(function(t){return Promise.resolve(t)})}function l(t){return Object(s["b"])("".concat(o,"/addComment"),t).then(function(t){return Promise.resolve(t)})}},"0be6":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"template_box_wrap",attrs:{id:"commentBox"}},[n("h3",[t._v(t._s(t.title)),n("span",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}]},[t._v("("+t._s(t.total)+")")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.placeholder,expression:"placeholder"}],staticClass:"cancle_reply",on:{click:t.cancel}},[t._v("取消回复")]),n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"content",attrs:{placeholder:t.placeholder},domProps:{value:t.content},on:{focus:t.focus,input:function(e){e.target.composing||(t.content=e.target.value)}}})]),n("transition",{attrs:{name:"btn-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showForm,expression:"showForm"}],ref:"form",staticClass:"data_form"},[n("div",{staticClass:"info_input"},[n("h3",[t._v("昵称"),n("i",{staticStyle:{color:"red"}},[t._v("*")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{placeholder:"您的昵称（必填）"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"info_input"},[n("h3",[t._v("邮箱"),n("i",{staticStyle:{color:"red"}},[t._v("*")])]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.useremail,expression:"useremail"}],attrs:{placeholder:"您的邮箱（必填，不公开）"},domProps:{value:t.useremail},on:{input:function(e){e.target.composing||(t.useremail=e.target.value)}}})]),n("div",{staticClass:"info_input"},[n("h3",[t._v("个人站点")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.userblog,expression:"userblog"}],attrs:{placeholder:"http:// 有就填，勿填广告链接"},domProps:{value:t.userblog},on:{input:function(e){e.target.composing||(t.userblog=e.target.value)}}})]),n("div",{staticClass:"remmember"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isR,expression:"isR"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isR)?t._i(t.isR,null)>-1:t.isR},on:{change:function(e){var n=t.isR,s=e.target,o=!!s.checked;if(Array.isArray(n)){var r=null,a=t._i(n,r);s.checked?a<0&&(t.isR=n.concat([r])):a>-1&&(t.isR=n.slice(0,a).concat(n.slice(a+1)))}else t.isR=o}}}),t._v(" 记住信息")])])]),n("error-mess",{attrs:{text:t.errorText}}),n("div",{staticClass:"send_btn"},[n("button",{attrs:{type:"button"},on:{click:t.comment}},[t._v("评论")]),t._v(" 💋\n    ")])],1)},o=[],r=(n("a481"),n("c5f6"),n("ba3b")),a=n("0e0b"),i={data:function(){return{showForm:!1,isR:!1,content:"",username:"",useremail:"",userblog:"",errorText:""}},props:{total:{type:Number,default:0},title:{type:String,default:"评论"},placeholder:{type:String,default:""}},mounted:function(){this.getInfoFromStorage()},methods:{getInfoFromStorage:function(){var t=localStorage.getItem("userInfo");if(t)for(var e in this.isR=!0,t=JSON.parse(t),t)this[e]=t[e]},comment:function(){if(this.showForm)if(this.content)if(this.username)if(this.useremail)if(Object(a["a"])(this.useremail)){var t={content:this.content,username:this.username,useremail:this.useremail};this.userblog&&(t.userblog="http://"+this.userblog.replace("http://","")),this.$emit("comment",t),this.content="",this.rememberInfo()}else this.errorText="邮箱格式不正确";else this.errorText="请输入邮箱";else this.errorText="请输入昵称";else this.errorText="内容不能为空",this.$refs.content.focus();else this.showForm=!0},rememberInfo:function(){if(this.isR){var t={username:this.username,useremail:this.useremail,userblog:this.userblog};localStorage.setItem("userInfo",JSON.stringify(t))}else localStorage.removeItem("userInfo")},cancel:function(){this.$emit("cancel")},focus:function(){this.$refs.content.style.height="200px"},toggleForm:function(){this.showForm=!this.showForm}},components:{ErrorMess:r["a"]}},c=i,l=(n("fcdb"),n("2877")),u=Object(l["a"])(c,s,o,!1,null,"712abcd1",null);e["a"]=u.exports},"0e0b":function(t,e,n){"use strict";function s(t){var e=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return e.test(t)}n.d(e,"a",function(){return s})},"2ad8":function(t,e,n){},3144:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mess_list_wrap"},[n("ul",{staticClass:"board_list"},t._l(t.data,function(e,s){return n("li",{key:e.id},[n("div",{staticClass:"author_info"},[n("div",{staticClass:"pub_info"},[e.userblog?n("a",{staticClass:"author_name",attrs:{href:e.userblog,target:"_blank"}},[t._v(t._s(e.username))]):n("span",{staticClass:"author_name"},[t._v(t._s(e.username))]),n("span",{staticClass:"pub_time"},[t._v(t._s(e.pubtime))])]),n("div",{staticClass:"base_info"},[n("span",{staticClass:"quto_btn",on:{click:function(n){return t.qutoComment(e)}}},[n("a",{attrs:{href:"#commentBox"}},[t._v("引用")])]),n("span",{staticClass:"floor_text"},[t._v(t._s(t.total-s)+"楼")])])]),n("div",{staticClass:"content"},[n("blockquote",{directives:[{name:"show",rawName:"v-show",value:e.replycontent,expression:"item.replycontent"}]},[n("pre",[t._v("引用 "+t._s(e.replyname)+" 的发言")]),t._v("\n                    "+t._s(e.replycontent)+"\n                ")]),n("pre",{staticClass:"content_origin"},[t._v(t._s(e.content))])])])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:t.total>t.data.length,expression:"total > data.length"}],staticClass:"get_more_btn"},[n("more-btn",{attrs:{text:"查看更多"},on:{onClick:this.handleGetMore}})],1)])},o=[],r=(n("c5f6"),n("af11")),a={props:{data:{type:Array,default:function(){return[]}},total:{type:Number,default:0}},methods:{qutoComment:function(t){var e={replyname:t.username,replycontent:t.content,replyemail:t.useremail};this.$emit("quto",e)},handleGetMore:function(){this.$emit("getMore")}},components:{MoreBtn:r["a"]}},i=a,c=(n("d779"),n("2877")),l=Object(c["a"])(i,s,o,!1,null,"79518e57",null);e["a"]=l.exports},"6eb6":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"markdown_html_wrap",attrs:{id:"markdown_content"},domProps:{innerHTML:t._s(t.content)}})},o=[],r={props:{content:{type:String,default:""}}},a=r,i=n("2877"),c=Object(i["a"])(a,s,o,!1,null,null,null);e["a"]=c.exports},7085:function(t,e,n){"use strict";var s=n("70df"),o=n.n(s);o.a},"70df":function(t,e,n){},af11:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"l_button_wrap",on:{click:t.click}},[t._v(t._s(t.text))])},o=[],r={props:{text:{type:String,default:"click me"}},methods:{click:function(){this.$emit("onClick")}}},a=r,i=(n("ca57"),n("2877")),c=Object(i["a"])(a,s,o,!1,null,"f8e2fae6",null);e["a"]=c.exports},b044:function(t,e,n){"use strict";var s=n("fc9a"),o=n.n(s);o.a},ba3b:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"error-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.text,expression:"text"}],staticClass:"error_mess_wrap"},[n("span",{staticClass:"icon-error"},[n("i",{staticClass:"path1"}),n("i",{staticClass:"path2"})]),n("span",[t._v(" "+t._s(t.text))])])])},o=[],r={props:{text:{type:String,default:""}}},a=r,i=(n("b044"),n("2877")),c=Object(i["a"])(a,s,o,!1,null,"a61989fc",null);e["a"]=c.exports},ca57:function(t,e,n){"use strict";var s=n("f2da"),o=n.n(s);o.a},d779:function(t,e,n){"use strict";var s=n("e053"),o=n.n(s);o.a},e053:function(t,e,n){},e5ba:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"glide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"source_detail_wrap"},[n("div",{staticClass:"source_info"},[n("div",{staticClass:"source_cover"},[n("img",{attrs:{src:t.movie.cover}})]),n("div",{staticClass:"base_info"},[n("h2",{staticClass:"title"},[t._v(t._s(t.movie.name)+"（"+t._s(t.movie.type)+"）")]),n("p",[n("span",[t._v("类型：")]),t._v(t._s(t.movie.tag))]),n("p",[n("span",[t._v("导演：")]),t._v(t._s(t.movie.director))]),n("p",[n("span",[t._v("演员：")]),t._v(t._s(t.movie.actor))]),n("p",{staticClass:"desc"},[t._v(t._s(t.movie.desc))])])]),n("div",{staticClass:"content_box"},[n("md-to-html",{attrs:{content:t.movie.content}})],1),n("div",{staticClass:"comment_box",attrs:{id:"comment"}},[n("mess-list",{attrs:{data:t.comments,total:t.commentTotal},on:{quto:t.replyComment}}),n("comment-box",{attrs:{total:t.commentTotal,placeholder:t.commentText},on:{comment:t.commentMovie,cancel:t.clearReply}})],1)])])},o=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),a=n("0be6"),i=n("3144"),c=n("6eb6"),l=n("fc91"),u=n("063c");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var d={data:function(){return{commentPage:1,commentTotal:0,comments:[],movie:{},commentText:"",loading:!0}},computed:{id:function(){return this.$route.params.id}},mounted:function(){this.initDetail(),this.getComments(),this.reply={}},methods:{initDetail:function(){var t=this;Object(l["a"])(this.id).then(function(e){200===e.code&&(t.movie=e.data),t.loading=!1})},getComments:function(){var t=this;Object(u["e"])({page:this.commentPage,mid:this.id}).then(function(e){if(200===e.code){var n=e.data,s=n.list,o=n.total;t.comments=s,t.commentTotal=o}})},commentMovie:function(t){var e=this;t=Object.assign({},t,f({host:this.id,type:4},this.reply)),Object(u["a"])(t).then(function(n){200===n.code&&(e.comments.unshift(t),e.commentTotal+=1,location.href="/movie/".concat(e.id,"#comment")),e.clearReply()})},replyComment:function(t){this.reply=t,this.commentText="回复 ".concat(t.replyname," 的留言")},clearReply:function(){this.reply={},this.commentText=""}},components:{CommentBox:a["a"],MessList:i["a"],MdToHtml:c["a"]}},v=d,p=(n("7085"),n("2877")),h=Object(p["a"])(v,s,o,!1,null,"1c156d1a",null);e["default"]=h.exports},f2da:function(t,e,n){},fc91:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return a});var s=n("4020"),o="movie";function r(t){return Object(s["a"])("".concat(o,"/getAll"),{page:t.page,key:t.key}).then(function(t){return Promise.resolve(t)})}function a(t){return Object(s["a"])("".concat(o,"/detail"),{id:t}).then(function(t){return Promise.resolve(t)})}},fc9a:function(t,e,n){},fcdb:function(t,e,n){"use strict";var s=n("2ad8"),o=n.n(s);o.a}}]);